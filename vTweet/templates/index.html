{% extends "base.html" %} {% block title %} vTweet {% endblock %} {% block body
%}

<body>
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <a class="navbar-brand" href="#">vTweet</a>
    <button
      class="navbar-toggler"
      type="button"
      data-toggle="collapse"
      data-target="#navbarSupportedContent"
      aria-controls="navbarSupportedContent"
      aria-expanded="false"
      aria-label="Toggle navigation"
    >
      <span class="navbar-toggler-icon"></span>
    </button>
  </nav>

  <div class="container" style="padding-top: 20px;">
    <h1 class="mt-2">Welcome to vTweet!</h1>
    <h4 class="text-right">- Location-based tweet analysis</h4>
  </div>
  <div class="container-fluid">
    <div id="mapid" class="col-md-12" style="height: 500px;"></div>
    <script>
      var mymap = L.map("mapid").setView([23, 72], 3);
      var mapboxAccessToken =
        "pk.eyJ1IjoieWFzaHJhamtha2thZCIsImEiOiJjazhwaDhqbzAwNGVpM2RwcXZ0MHY0ZTN4In0.2TI2W6DhAgAUmGRK_T3Hqg";
      L.tileLayer(
        "https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}",
        {
          attribution:
            'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
          maxZoom: 18,
          id: "mapbox/streets-v11",
          tileSize: 512,
          zoomOffset: -1,
          accessToken: mapboxAccessToken,
        }
      ).addTo(mymap);
      var heat = L.heatLayer(
        [
          {% for res in heatmap_results %}
            [{{res[0]}}, {{res[1]}}, {{res[2]}}],
          {% endfor %}
        ],
        {% raw %}
        { radius: 25, maxZoom: 3 }
       {% endraw %}
      ).addTo(mymap);
    </script>
  </div>
  <div class="container">
    <h3>
      Hashtags
      <small class="text-muted">Most popular ones with their frequency</small>
    </h3>
    <table class="table">
      <thead class="thead-dark">
        <tr>
          <th scope="col">Hashtag</th>
          <th scope="col">#</th>
        </tr>
      </thead>
      <tbody>
        {% for res in hashtag_results %}
        <tr>
          <th scope="row">{{res[0]}}</th>
          <td>{{res[1]}}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  <div class="container">
    <h3>
      Popular users
      <small class="text-muted">in terms of followers count</small>
    </h3>
    <div class="row">
            {% for res in popular_user_results %}

    <div class="card col-12 col-md-6 col-lg-4" style="width: 18rem;">
      <img src="{{res[3]}}" class="card-img-top"/>
      <div class="card-body">
        <h5 class="card-title">{{res[0]}}</h5>
        <p class="card-text">
           @{{res[1]}}
        </p>
      </div>
      <div class="card-body">
        <p>Followers Count: {{ res[2] }}</p>
      </div>
    </div>
    {% endfor %}
    </div>
  </div>
{#  <!-- {% block map %}{% endblock %} -->#}
{#  <!-- <div id="map" style="width: 900px; height: 580px"></div>#}
{#    <script>#}
{#      // Creating map options#}
{#      var mapOptions = {#}
{#        center: [23.037392, 72.552182],#}
{#        zoom: 17#}
{#      };#}
{##}
{#      // Creating a map object#}
{#      var map = new L.map("map", mapOptions);#}
{##}
{#      var mapboxAccessToken =#}
{#        "sk.eyJ1IjoicHJheWFncyIsImEiOiJjazg0a201MWEwbDdhM21vZGgwMjlldmVtIn0.4DkYE0PvC2ueU9kYLZV7fw";#}
{##}
{#      // L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {#}
{#      //   attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',#}
{#      //   maxZoom: 18,#}
{#      //   id: 'mapbox/streets-v11',#}
{#      //   tileSize: 512,#}
{#      //   zoomOffset: -1,#}
{#      //   accessToken: mapboxAccessToken#}
{#      // }).addTo(map);#}
{##}
{#      L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {#}
{#        maxZoom: 19,#}
{#        attribution:#}
{#          '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'#}
{#      }).addTo(map);#}
{##}
{#      L.marker([23.037392, 72.552182])#}
{#        .bindPopup(#}
{#          '<a href="' +#}
{#            "https://ahduni.edu.in/seas/" +#}
{#            '" target="_blank">' +#}
{#            "SEAS, Ahmedabad University" +#}
{#            "</a>"#}
{#        )#}
{#        .addTo(map);#}
{#    </script> -->#}
</body>

{% endblock %}
